---
## Front matter
lang: ru-RU
title: Лабораторная работа №6 Поиск файлов. Перенаправление ввода-вывода. Просмотр запущенных процессов.
author: Emil A. Samigullin
institute: |
	\inst{1}RUDN University, Moscow, Russian Federation
date: 27 April, 2022 Moscow, Russian Federation

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - '\makeatletter'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

# Лабораторная работа №7
# Командная оболочка Midnight Commander.

Автор: Смирнов-Мальцев Егор Дмитриевич

Москва, 2022

---

# Цель работы

* Ознакомление с инструментами поиска файлов и фильтрации текстовых данных.
Приобретение практических навыков: по управлению процессами (и заданиями), по проверке использования диска и обслуживанию файловых систем.

---

# Теоретическое введение

GNU Midnight Commander (mc) — один из файловых менеджеров с текстовым интерфейсом типа Norton Commander для UNIX-подобных операционных систем, а также Microsoft Windows и Windows NT, OS/2, macOS (но не Mac OS 9).
Создан в 1994 году Мигелем де Икасой.

Midnight Commander (GNU Midnight Commander) является частью проекта GNU, и все разработчики передали свои права на программу в пользу Free Software Foundation.

---

## Возможности

- Работа с различными архивами и образами файловых систем, как если бы они являлись обычными каталогами.
- Работа с сетевыми файловыми системами Samba, FTP, SFTP.
- Выполнение операций копирования и перемещения файлов в фоновом режиме.
- Встроенный текстовый редактор с подсветкой синтаксиса.
- Текстовый режим, основанный на библиотеках ncurses и S-Lang. Это позволяет программе работать как в консоли, так и в различных эмуляторах терминала и через удалённые соединения, например, по протоколу SSH. Поддерживает мышь.

---

## Возможности

- Поддержка многоязыкового интерфейса.
- Поддержка кодировки UTF-8 (начиная с 2009 года).
- Настраиваемое пользовательское меню, вызывается по ```F2```. Каждый пункт меню выполняет набор команд оболочки (shell). Команды прописываются в файл ~/.config/mc/.mc.menu (или ~/.config/mc/menu).
- Список каталогов для быстрого доступа, вызывается по ```Ctrl+\```. Настраивается непосредственно в панели быстрого доступа, либо редактированием файла ~/.config/mc/hotlist.

---

# Выполнение лабораторной работы

1. Изучил информацию о mc, вызвав в командной строке man mc.

2. Запустил из командной строки mc, изучите его структуру и меню.

3. Выполнил несколько операций в mc, используя управляющие клавиши
- выделение/отмена выделения файлов.
- копирование/перемещение файлов.
- получение информации о размере и правах доступа на файлы и/или каталоги и т.п.).

4. Выполнил основные команды меню панелей. Информация, выводимая mc, также полна, как и выводимая с помощью команды ls.

---

# Выполнение лабораторной работы

5. Используя возможности подменю ```Файл```, выполнил следующее: 
– просмотр содержимого текстового файла.
– редактирование содержимого текстового файла (без сохранения результатов редактирования).
– создание каталога.
– копирование в файлов в созданный каталог.

6. С помощью соответствующих средств подменю ```Команда``` осуществил следующее: 
– поиск в файловой системе файла .cpp, содержащего строку main.
– выбор и повторение одной из предыдущих команд.
– переход в домашний каталог.
– анализ файла меню и файла расширений.

---

# Выполнение лабораторной работы

7. Вызвал подменю ```Настройки```. Освоил операции, определяющие структуру
экрана mc (Full screen, Double Width, Show Hidden Files и т.д.).

8. Создал текстовой файл text.txt и открыл его в mcedit.

9. Вставил в открытый файл небольшой фрагмент текста, скопированный из задания лабораторной работы.

---

# Выполнение лабораторной работы

10. Проделайте с текстом следующие манипуляции, используя горячие клавиши:
- Удалил строку текст.
- Выделил фрагмент текста и скопируйте его на новую строку.
- Выделил фрагмент текста и перенесите его на новую строку.
- Отменил последнее действие.
- На моей клавиатуре нет кнопок ```end```, ```home```, поэтому я не могу перейти в конец и начало файла.
- Сохранил и закрыл файл.

11. Открыл файл с исходным текстом на языке с++.

12. Используя меню редактора, выключил подсветку текста.

---

# Ответы на контрольные вопросы

1. mc работает с панелями, отображающими файлы. Панели могут дополнительно быть переведены в один из трех режимов: стандартный, режим информация и режим дерева.
В стандартном режиме объекты показаны в том же виде, как и при просмотре файлов через проводник.
В режиме дерево на одной из панелей выводится структура дерева каталогов.
В режиме информация на панель выводятся сведения о файле и текущей файловой системе, расположенных на активной панели.

---

# Ответы на контрольные вопросы

2. В ходе лабораторной работы мы копировали, перемещали и просматривали файлы с помощью mc. Все это можно делать в shell с помощью команд cp, rm и cat.

3. В меню панелей можно выбрать формат списка (стандартный, ускоренный, расширенный, определённый пользователем) и порядок сортировки, который позволяет задать критерии сортировки при выводе списка файлов и каталогов:
без сортировки, по имени, расширенный, время правки, время доступа, время изменения атрибута, размер, узел.

---

# Ответы на контрольные вопросы

4. Команды меню ```Файл```:
- Просмотр ( F3 ) — позволяет посмотреть содержимое текущего (или выделенного) файла без возможности редактирования.
- Просмотр вывода команды (```М```+```!```) — функция запроса команды с параметрами (аргумент к текущему выбранному файлу).
- Правка (```F4```) — открывает текущий (или выделенный) файл для его редактирования.

---

# Ответы на контрольные вопросы

4. Команды меню ```Файл```:
- Копирование (```F5```) — осуществляет копирование одного или нескольких файлов или каталогов в указанное пользователем во всплывающем окне место.
- Права доступа (```Ctrl-x``````c```) — позволяет указать (изменить) права доступа к одному или нескольким файлам или каталогам.
- Жёсткая ссылка(```Ctrl-x``````l```) — позволяет создать жёсткую ссылку к текущему (или выделенному) файлу.
---

# Ответы на контрольные вопросы

4. Команды меню ```Файл```:
- Символическая ссылка (```Ctrl-x``````s``` ) — позволяет создать символическую ссылку к текущему (или выделенному) файлу.
- Владелец/группа (```Ctrl-x``````o```) — позволяет задать (изменить) владельца и имя группы для одного или нескольких файлов или каталогов.
- Права (расширенные) — позволяет изменить права доступа и владения для одного или нескольких файлов или каталогов.
---

# Ответы на контрольные вопросы

4. Команды меню ```Файл```:
- Переименование (```F6```) — позволяет переименовать (или переместить) один или несколько файлов или каталогов.
- Создание каталога (```F7```) — позволяет создать каталог.
- Удалить (```F8```) — позволяет удалить один или несколько файлов или каталогов.
- Выход (```F10```) — завершает работу.

---

# Ответы на контрольные вопросы

5. Команды меню ```Команда```:
- Дерево каталогов — отображает структуру каталогов системы.
- Поиск файла — выполняет поиск файлов по заданным параметрам.
- Переставить панели — меняет местами левую и правую панели.
- Сравнить каталоги (```Ctrl-x``````d```) — сравнивает содержимое двух каталогов.
- Размеры каталогов — отображает размер и время изменения каталога
- История командной строки — выводит на экран список ранее выполненных воболочке команд.
- Каталоги быстрого доступа (```Ctrl-\```) — при вызове выполняется быстрая смена текущего каталога на один из заданного списка.

---

# Ответы на контрольные вопросы

5. Команды меню ```Команда```:
- Восстановление файлов — позволяет восстановить файлы на файловых системах ext2 и ext3.
- Редактировать файл расширений — позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением (например, какое программного обеспечение запускать для открытия или редактирования файлов с расширением doc или docx).
- Редактировать файл меню — позволяет отредактировать контекстное меню пользователя, вызываемое по клавише ```F2```.
- Редактировать файл расцветки имён — позволяет подобрать оптимальную для пользователя расцветку имён файлов в зависимости от их типа.

---

# Ответы на контрольные вопросы

6. Команды меню ```Настройки```:
- Конфигурация — позволяет скорректировать настройки работы с панелями.
- Внешний вид и Настройки панелей — определяет элементы (строка меню, командная строка, подсказки и прочее), отображаемые при вызове , а также геометрию расположения панелей и цветовыделение.
- Биты символов — задаёт формат обработки информации локальным терминалом.

---

# Ответы на контрольные вопросы

6. Команды меню ```Настройки```:
- Подтверждение — позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также привыходе из программы.
- Распознание клавиш — диалоговое окно используется для тестирования функциональных клавиш, клавиш управления курсором и прочее.
- Виртуальные ФС – настройки виртуальной файловой системы: тайм-аут, пароль и прочее.

---

# Ответы на контрольные вопросы

7. Команды mc:
- ```F1``` - вызов контекстно-зависимой подсказки.
- ```F2``` - вызов пользовательского меню с возможностью создания и/или дополнения дополнительных функций.
- ```F3``` - просмотр содержимого файла, на который указывает подсветка в активной панели.
- ```F4``` - вызов встроенного в редактора для изменения содержания файла, на который указывает подсветка в активной панели.
- ```F5``` - копирование одного или нескольких файлов, отмеченных в первой (активной) панели, в каталог, отображаемый на второй панели.

---

# Ответы на контрольные вопросы

7. Команды mc:
- ```F6``` - перенос одного или нескольких файлов, отмеченных в активной панели, в каталог, отображаемый на второй панели.
- ```F7``` - создание подкаталога в каталоге, отображаемом в активной панели.
- ```F8``` - удаление одного или нескольких файлов (каталогов), отмеченных в активной панели.
- ```F9``` - вызов меню.
- ```F10``` - выход из mc.

---

# Ответы на контрольные вопросы

8. Команды редактора mc:
- ```Ctrl-y``` - удалить строку.
- ```Ctrl-u``` - отмена последней операции.
- ```Ins``` - вставка/замена.
- ```F7``` - поиск строки.
- ```F4``` - замена.
- ```F3``` - первое нажатие — начало выделения, второе — окончание выделения
- ```F5``` - копировать выделенный фрагмент.
- ```F6``` - переместить выделенный фрагмент.
- ```F8``` - удалить выделенный фрагмент.
- ```F2``` - записать изменения в файл.
- ```F10``` - выйти из редактора.

---

# Ответы на контрольные вопросы

9. В mc есть меню пользователя. Оно позволяет сохранить часто используемые команды панелизации под отдельными информативными именами, чтобы иметь возможность их быстро вызвать по этим именам. Для этого нужно набрать команду в строке ввода (строка "Команда") и нажать кнопку ```Добавить```. После этого потребуется ввести имя, по которому будет вызываться команда. В следующий раз достаточно будет выбрать нужное имя из списка, а не вводить всю команду заново.

---

# Ответы на контрольные вопросы

10. Программа MC, как и любой файловый процессор, может выполнять операции с одиночным файлом и с группой файлов. Кроме выполнения стандартных операций возможно выполнение ряда дополнительных действий:
редактирование текстовых файлов, подключение к удаленному компьютеру, работа с архивными файлами и т.д. Методика выполнения операций у всех файловых процессоров одинакова:
* выбрать объект (файл или группу файлов);
* указать операцию с помощью клавиатуры или мыши;
* при необходимости указать дополнительные параметры.

---

# Выводы

* Я освоил основы работы c файлами с помощью mc.
